"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StructuredPrompt = void 0;
const chat_js_1 = require("./chat.cjs");
class StructuredPrompt extends chat_js_1.ChatPromptTemplate {
    get lc_aliases() {
        return {
            ...super.lc_aliases,
            schema: "schema_",
        };
    }
    constructor(input) {
        super(input);
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        Object.defineProperty(this, "schema", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.schema = input.schema;
    }
    pipe(coerceable) {
        if (typeof coerceable === "object" &&
            "withStructuredOutput" in coerceable &&
            typeof coerceable.withStructuredOutput === "function") {
            return super.pipe(coerceable.withStructuredOutput(this.schema));
        }
        else {
            throw new Error(`Structured prompts need to be piped to a language model that supports the "withStructuredOutput()" method.`);
        }
    }
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    static fromMessagesAndSchema(promptMessages, schema
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    ) {
        return StructuredPrompt.fromMessages(promptMessages, { schema });
    }
}
exports.StructuredPrompt = StructuredPrompt;
